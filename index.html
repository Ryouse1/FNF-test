<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Console Viewer</title>
<style>
body {
  background: #111;
  color: white;
  font-family: monospace;
  margin: 0;
}

iframe {
  width: 100%;
  height: 60vh;
  border: 2px solid orange;
}

#consoleBox {
  height: 35vh;
  overflow-y: auto;
  background: black;
  padding: 10px;
  border-top: 2px solid orange;
}

.log { color: #0f0; }
.error { color: #f33; }
.warn { color: #ff0; }
</style>
</head>
<body>

<iframe src="https://www.newgrounds.com/portal/view/770371"></iframe>

<div id="consoleBox"></div>

<script>
const consoleBox = document.getElementById("consoleBox");

function addMessage(type, message) {
  const div = document.createElement("div");
  div.className = type;
  div.textContent = `[${type}] ` + message;
  consoleBox.appendChild(div);
  consoleBox.scrollTop = consoleBox.scrollHeight;
}

// console上書き
["log","error","warn"].forEach(type => {
  const original = console[type];
  console[type] = function(...args) {
    addMessage(type, args.join(" "));
    original.apply(console, args);
  };
});

// グローバルエラー捕捉
window.onerror = function(msg, src, line, col, err) {
  addMessage("error", msg + " (" + src + ":" + line + ")");
};

// Promiseエラー捕捉
window.addEventListener("unhandledrejection", function(e) {
  addMessage("error", "Unhandled Promise: " + e.reason);
});

console.log("Console viewer ready.");
</script>

</body>
</html>
